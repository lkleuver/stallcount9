{% extends "index.html" %}
 
{% block title %}Pool{% endblock %}

{% block content %}
	<h1>{{pool.Stage.title}} - {{pool.title}}</h1>
	
	<h2>Spots</h2>
	<ul>
	{% for spot in pool.getSpots() %}
		<li>{{ spot.rank }} - {{ spot.title }}</li>
	{% endfor %}
	</ul>
	
	<h2>Standing</h2>
	
	{% for round in pool.Rounds %}
		<tr> {# TODO: insert the right format classes #}
		<a {% if loop.index == standingsRound %} class="action" {% else %} class="roundchoice" {% endif %} href="?n=/pool/detail/{{pool.id}}&standingsRound={{loop.index}}">after Round {{loop.index}}</a> &nbsp&nbsp&nbsp;
	{% endfor %}
		
	<table class="standings">
		<tr>
			<th>#</th>
			<th>Team</th>
			<th>Games</th>
			<th>VP</th>
			<th>Opponent VP</th>
			<th>Margin</th>
			<th>Goals Scored</th>
			<th>Wins</th>
			<th>Losses</th>
			<th>Spirit</th>
		</tr>
		
	{% for team in standings %}
		<tr{% if loop.index is even %} class="odd" {% endif %}>
			<td class="rank">{{team.rank}}</td>
			<td class="team"><a href="{{team.team_id}}">{{team.name}}</a></td>
			<td class="nrgames">{{team.games}}</td>
			<td class="vp">{{team.vp}}</td>
			<td class="opp_vp">{{team.opp_vp}}</td>
			<td class="margin">{{team.margin}}</td>
			<td class="scored">{{team.scored}}</td>
			<td class="wins">{{team.wins}}</td>
			<td class="losses">{{team.losses}}</td>
			<td class="spirit">{{team.spirit}}</td>
		</tr>
	{% endfor %}
	</table>
	
	
	<h2>Rounds</h2>
	<ul class="roundlist">
		{% for round in pool.Rounds %}
			<li>
				<h3>Round {{round.rank}}</h3> 
				{% if round.rank == pool.currentRound %}
					<a class="action" href="?n=/pool/matchups/{{pool.id}}">Create Matchups for this round</a>					
				{% endif %}
				
				<table class="matchlist">
					<tr>
						<th>#</th>
						<th>Home</th>
						<th>Away</th>
						<th>result</th>
						<th>op</th>
					</tr>
					
				{% for match in round.Matches %}
					<tr{% if loop.index is even %} class="odd" {% endif %}>
						<td class="rank">{{loop.index}}</td>
						<td class="team"><a href="{{match.home_team_id}}">{% if match.home_team_id %}{{match.HomeTeam.name}}{% else %}{{match.homeName}}{% endif %}</a></td>
						<td class="team"><a href="{{match.away_team_id}}">{% if match.away_team_id %}{{match.AwayTeam.name}}{% else %}{{match.awayName}}{% endif %}</a></td>
						<td class="result">{{match.homeScore}} - {{match.awayScore}}</td>
						<td><a href="?n=/match/edit/{{match.id}}">edit</a></td>
					</tr>
				{% endfor %}
				</table>
			</li>
		{% endfor %}
	</ul>

	
	
	<p>
		<a href="?n=/stage/detail/{{pool.Stage.id}}">back to stage</a>
	</p>
  
{% endblock %}